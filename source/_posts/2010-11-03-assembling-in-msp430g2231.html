---
layout: post
title: Assembling in MSP430G2231
date: '2010-11-03T10:58:00.002+05:30'
author: Hari John Kuriakose
tags:
- embedding
- MSP430G2231
- computing
modified_time: '2010-11-03T11:17:56.088+05:30'
thumbnail: http://1.bp.blogspot.com/_rkBB8V8TgZY/TND2mraxVGI/AAAAAAAAAU8/R9RssfKc9mc/s72-c/IMG_7331.JPG
blogger_id: tag:blogger.com,1999:blog-3368921059404601044.post-1075566641121095838
blogger_orig_url: http://harijohnkuriakose.blogspot.com/2010/11/assembling-in-msp430g2231.html
---

<b><u>Sample Program</u></b><br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov #0x0260,r5</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov #0x0270,r6</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><br />&nbsp;&nbsp; &nbsp;Loop:<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>cmp #0,@r5</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>jz End<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov @r5,@r6</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>incd r5<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>incd r6<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>jmp Loop<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><br />&nbsp;&nbsp; &nbsp;End:<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>mov #0x01,&amp;0x22<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov #0x01,&amp;0x21</b><br /><br />This code demonstrates a simple implementation of '<b>strcpy</b>' in msp430 assembly code. The first string is present in the location 0x0260. It is to be copied to another memory location starting from 0x0270. The RAM area of MSP430G2231 lies in the range 0x0200 to 0x027F.<br /><br />Whats worth noticing is the ease with which some operations are defined which are otherwise very difficult in other assembly codes.<br /><br />The program exits gracefully by lighting the red led, after successfully copying the string.<br /><br /><b><u>Notations</u></b><br /><br /><b>#</b> - This symbol is used to indicate a pure number. The<br />&nbsp;&nbsp; &nbsp; &nbsp;number can be an integer, in binary or a<br />&nbsp;&nbsp; &nbsp; &nbsp;hexadecimal.<br />&nbsp;&nbsp; &nbsp; &nbsp;For example, "mov #0x0260,r5" will move the hex<br />&nbsp;&nbsp; &nbsp; &nbsp;number 0260 to register r5.<br /><br /><b>@</b> - It can happen that, the data stored in a register is<br />&nbsp;&nbsp; &nbsp; &nbsp;the address of another memory location. The actual<br />&nbsp;&nbsp; &nbsp; &nbsp;value inside this address can be accessed by using<br />&nbsp;&nbsp; &nbsp; &nbsp;the '@'&nbsp;symbol. When '@' is used, the value in a<br />&nbsp;&nbsp; &nbsp; &nbsp;register is interpreted to be the address of a memory<br />&nbsp;&nbsp; &nbsp; &nbsp;location, and the actual data present in this location<br />&nbsp;&nbsp; &nbsp; &nbsp;is fetched.<br />&nbsp;&nbsp; &nbsp; &nbsp;The line "cmp #0,@r5" compares the number 0 with<br />&nbsp;&nbsp; &nbsp; &nbsp;the data in the memory location pointed to by the<br />&nbsp;&nbsp; &nbsp; &nbsp;value of r5.<br /><br /><b>&amp;</b> - When the address of a location is to be used directly,<br />&nbsp;&nbsp; &nbsp; &nbsp;the '&amp;' symbol is used. If not, the address is<br />&nbsp;&nbsp; &nbsp; &nbsp;interpreted as just a number, thereby generating errors.<br /><br /><b><u>Notable Feature</u></b><br /><br /><b>@ and again @</b><br />&nbsp;&nbsp; &nbsp;The line "mov @r5,@r6" is simple, sleek, easy-to-understand, self explanatory and normally illegal in other assembly languages.<br /><br />&nbsp;&nbsp; &nbsp;Technically, the '@' operation is emulated for the destination part. The "mov @r5,@r6" line will be changed to "<b>mov @r5,0x0(r6)</b>" after running msp430-gcc.<br /><br /><b><u>Conclusion</u></b><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TND2mraxVGI/AAAAAAAAAU8/R9RssfKc9mc/s1600/IMG_7331.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TND2mraxVGI/AAAAAAAAAU8/R9RssfKc9mc/s320/IMG_7331.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The MSP-EXP430G2 Launchpad (TI) for the MSP430 family</td></tr></tbody></table>Altogether, there are only 27 instructions with about 7 addressing modes in the MSP430 family, which are easy to grasp and employ.<br />&nbsp;&nbsp; <br />Coding in MSP430 family is fun!