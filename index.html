
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Function and its ParametersThe sample program is:When a function is called, some housekeeping is normally done which appears as the function's &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ejhari.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="ejhari.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/25/translating-c-constructs-to-msp430/">Translating C Constructs to MSP430 Assembly Code</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-11-25T21:44:00+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>9:44 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><b><u>Function and its Parameters</u></b><br /><br />The sample program is:<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TNKeILjvQOI/AAAAAAAAAVg/yVt5GpIdD0g/s1600/1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="188" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TNKeILjvQOI/AAAAAAAAAVg/yVt5GpIdD0g/s320/1.png" width="320" /></a></td></tr></tbody></table>When a function is called, some housekeeping is normally done which appears as the function&#8217;s <b>prologue</b> in the assembly code (this would not be true if the function is declared with the attribute &#8221;<b>naked</b>&#8221;).<br /><br />The procedure is:<br />1. The current value of r4 (used as <b>frame pointer</b> in MSP430 family) is pushed<br />&nbsp;&nbsp; &nbsp;into&nbsp;the stack. The <b>stack pointer</b> (r1) automatically gets decremented by 2.<br />2. r1 gets decremented again by an offset, thus allocating a stack frame. The<br />&nbsp;&nbsp; &nbsp;offset by which r1 gets decremented depends on the number of local variables <br />&nbsp;&nbsp; &nbsp;in&nbsp;the called function.<br />&nbsp;&nbsp; &nbsp;Here, r1 gets decremented by 4, since there are two local variables for <i>fun()</i>, <i>a</i><br />&nbsp;&nbsp; &nbsp;and <i>b</i>.<br />3. The current value of the stack pointer r1 is copied into r4 (the register r4 thus<br />&nbsp;&nbsp; &nbsp;indicates the frame pointer for the currently executing function).<br />&nbsp;&nbsp; &nbsp;All further manipulations of the local variables will be with reference to the<br />&nbsp;&nbsp; &nbsp;frame pointer r4.<br />4. After the body of the called function is executed, the same offset as above is <br />&nbsp;&nbsp; &nbsp;added back to the stack pointer r1, thus deallocating the stack frame.<br />5. The current value of r1 is popped into r4, thus retrieving the previous stack<br />&nbsp;&nbsp; &nbsp;frame. The stack pointer r1 gets auto-incremented by 2.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNKbrn3am5I/AAAAAAAAAVc/5-J_ig58UNg/s1600/2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="207" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNKbrn3am5I/AAAAAAAAAVc/5-J_ig58UNg/s320/2.png" width="320" /></a></div><br />The assembler directives <b>__FrameSize</b> and <b>__FrameOffset</b> gives the size and offset of the frame allocated for the function <i>fun()</i>.<br /><br /><b><u>Pointers</u></b><br /><br />The sample program is:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKeRG7OhoI/AAAAAAAAAVk/8yfHLDO4QCo/s1600/41.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="138" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKeRG7OhoI/AAAAAAAAAVk/8yfHLDO4QCo/s320/41.png" width="320" /></a></div><br />On generating the corresponding assembly code:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKeaChDUbI/AAAAAAAAAVo/g4oHEuzXcHc/s1600/42.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="208" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKeaChDUbI/AAAAAAAAAVo/g4oHEuzXcHc/s320/42.png" width="320" /></a></div><br />The code can be traced as follows:<br />1. The number 10 is stored in the memory address which is at &nbsp;an offset of 2 bytes<br />&nbsp;&nbsp; &nbsp;from the location pointed to by the frame pointer r4.<br />2. The memory address of 10, i.e. the value of (r4 + 2), is stored in the memory<br />&nbsp;&nbsp; &nbsp;location pointed to by r4.<br />3. The data in the location pointed to by the register r4 is safely interpreted as<br />&nbsp;&nbsp; &nbsp;another memory address, and the number 20 is stored in this particular address.<br /><br />And you thought &#8220;pointers&#8221; were magic !!!<br /><br /><b><u>Variables</u></b><br /><br />The most simple case would be:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNKeh3jbiLI/AAAAAAAAAVs/hMCt3nU7ky4/s1600/51.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="76" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNKeh3jbiLI/AAAAAAAAAVs/hMCt3nU7ky4/s320/51.png" width="320" /></a></div><br />But on still expecting the prologue and epilogue:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKeqpCrXlI/AAAAAAAAAVw/sfoWJwmW4ok/s1600/52.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="139" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKeqpCrXlI/AAAAAAAAAVw/sfoWJwmW4ok/s320/52.png" width="320" /></a></div><br />The number 100 is stored in a memory location addressed with reference to the frame pointer r4.<br />The variable <i>i</i> is local to the function <i>main()</i> so no extra work.<br /><br /><b><u>Static Variables</u></b><br /><br />The demonstration will be like:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TNKezN8zsLI/AAAAAAAAAV0/V64Y22rG6LE/s1600/61.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="108" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TNKezN8zsLI/AAAAAAAAAV0/V64Y22rG6LE/s320/61.png" width="320" /></a></div><br />Wondering how the assembly code would look like:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKe4liLvAI/AAAAAAAAAV4/-9BBj0o-GlM/s1600/62.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="260" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKe4liLvAI/AAAAAAAAAV4/-9BBj0o-GlM/s320/62.png" width="320" /></a></div><br />The static integer 200 is stored in a similar way as above, but to a different address. Also this address (label i.1194) is located in the <b>.data section</b>, instead of the usual .text section.<br /><br />All global and static variables (which have their lifetime as long as the whole program), are stored in the .data section.<br /><br /><b><u>Pointers to Functions</u></b><br /><br />Considering the sample code:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TNKe-mHPZ4I/AAAAAAAAAV8/wq11Y33b8Gg/s1600/71.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="196" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TNKe-mHPZ4I/AAAAAAAAAV8/wq11Y33b8Gg/s320/71.png" width="320" /></a></div><br />A simple pointer to a function accepting void and returning void is created. It is assigned the memory address of the function <i>fun()</i>. Then this pointer to a function <i>f</i> is called.<br /><br />Awaiting the assembly code:<br /><div class="separator" style="clear: both; text-align: auto;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKfFHG_PfI/AAAAAAAAAWA/YyBhQKUBZ2Q/s1600/72.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNKfFHG_PfI/AAAAAAAAAWA/YyBhQKUBZ2Q/s320/72.png" width="272" /></a></div><div class="separator" style="clear: both; text-align: auto;"><br /></div><div class="separator" style="clear: both; text-align: auto;">The pointer <i>f</i> is local to the function <i>main()</i>. Hence, a stack frame of size 2 is allocated, as expected. The value of <i>f</i>, i.e. the memory address of function <i>fun()</i>, is stored in the location pointed to by the frame pointer r4. This address is then simply passed to the <i>call</i> instruction.</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/25/arsenal-of-embedded-system-programmer/">The Arsenal of an Embedded System Programmer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-11-25T16:44:00+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>4:44 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content">When confronting any new microcontroller or microprocessor or practicallly, a development board, there are some things to keep in mind before diving into the possibly arduous debugging session you are going to have with the system.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TO5EsT4DexI/AAAAAAAAAWY/HHPw_L71LOw/s1600/unix.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="251" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TO5EsT4DexI/AAAAAAAAAWY/HHPw_L71LOw/s320/unix.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Bits and more bits &#8230;</td></tr></tbody></table><b><u>The Rules</u></b><br />1. Never fully trust anything written before you, anywhere you may see it.<br />2. If you are forced to behave otherwise, go back to Rule 1.<br /><br /><b><u>The Programmer&#8217;s Model</u></b><br />&nbsp;&nbsp; &nbsp;You can&#8217;t possibly know everything about the interconnections, circuitry and other design specifications of the chip under concern and also the development board, when you work on it for the first time. But then, these factors aren&#8217;t really much of a concern. What you primarily need is something else.<br /><br />&nbsp;&nbsp; &nbsp;Even if you don&#8217;t know how the chip is built, you must know how you can control it, and also the features available at the higher level. You need to have a model of your own for the chip, called the Programmer&#8217;s Model. Through this model, you must be aware of the following:<br /><br />1. <b>Homework</b><br />&nbsp;&nbsp; &nbsp;Identify the manufacturer, family, type of device (value&nbsp;line, low/high density,<br />&nbsp;&nbsp; &nbsp;etc ..), and architecture (von&nbsp;Neumann, Harvard, etc ..).<br />&nbsp;&nbsp; &nbsp;Get the Family Manual, Device Specific Manual, and any&nbsp;other pdf that you may<br />&nbsp;&nbsp; &nbsp;find useful.<br />&nbsp;&nbsp; &nbsp;The manufacturer may also publish an errata sheet, which&nbsp;may become useful<br />&nbsp;&nbsp; &nbsp;in some rare cases.<br /><br />2. <b>Instruction set</b><br />&nbsp;&nbsp; &nbsp;Know whether the instructions are 16 or 32 bit. Be familiar&nbsp;with some common<br />&nbsp;&nbsp; &nbsp;instructions.<br />&nbsp;&nbsp; &nbsp;Understand the different addressing modes provided in the device.<br />&nbsp;&nbsp; &nbsp;Are the instructions aligned by &nbsp;2 or 4?<br />&nbsp;&nbsp; &nbsp;Does it suite more to a RISC or CISC style? &nbsp; <br /><br />3. <b>The Memory Map</b><br />&nbsp;&nbsp; &nbsp;Which are the memory areas for flash, RAM, interrupt&nbsp;vectors, peripheral<br />&nbsp;&nbsp; &nbsp;registers and special function registers&nbsp;(SFRs)?<br />&nbsp;&nbsp; &nbsp;Where is the starting location of stack stored? <br /><br />4. <b>Registers</b><br />&nbsp;&nbsp; &nbsp;Which are the General Purpose Registers, Program Counter,&nbsp;Status Register and<br />&nbsp;&nbsp; &nbsp;Special Function Registers?<br /><br />5. <b>The Vector Table</b><br />&nbsp;&nbsp; &nbsp;Where is the interrupt vector table present? Which&nbsp;interrupts do the vectors <br />&nbsp;&nbsp; &nbsp;represent in the table?<br />&nbsp;&nbsp; &nbsp;Which is the reset vector?<br /><br />6. <b>The Modules</b><br />&nbsp;&nbsp; &nbsp;Know the inbuilt modules in the package (ADC, Timer,&nbsp;USART, etc ..).<br />&nbsp;&nbsp; &nbsp;All the Control Word Registers needed and how to manipulate&nbsp;them, will be<br />&nbsp;&nbsp; &nbsp;usually specified in the Family Manual.<br /><br />7. <b>Modes of Operation</b><br />&nbsp;&nbsp; &nbsp;In some systems, the processor by itself may operate in&nbsp;different modes.<br />&nbsp;&nbsp; &nbsp;Also know about the various low power modes normally&nbsp;available for the system <br />&nbsp;&nbsp; &nbsp;as a whole.<br /><br />8. <b>The Runtime Framework</b><br />&nbsp;&nbsp; &nbsp;C is the normal choice for embedded programming.<br />&nbsp;&nbsp; &nbsp;If interested, learn the device specific startup functions that&nbsp;are called before<br />&nbsp;&nbsp; &nbsp;main().<br />&nbsp;&nbsp; &nbsp;You may also write a simple linker script.<br /><br />9. <b>Potential Bugs</b><br />&nbsp;&nbsp; &nbsp;Always keep an eye out for them. Unless it is something like&nbsp;a heisenbug for<br />&nbsp;&nbsp; &nbsp;example, it can be traced down. The time&nbsp;taken depends.</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/25/arm-cortex-m3/">The ARM Cortex-M3</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-11-25T15:57:00+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:57 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><b><u>The ARM Architecture</u></b><br /><br />The&nbsp;<b>ARM</b>&nbsp;is a&nbsp;32-bit&nbsp;reduced instruction set computer&nbsp;(RISC)&nbsp;instruction set architecture&nbsp;(ISA) developed by&nbsp;ARM Holdings. It was known as the&nbsp;<b>Advanced RISC Machine</b>, and before that as the&nbsp;<b>Acorn RISC Machine</b>. The ARM architecture is the most widely used&nbsp;32-bit&nbsp;ISA in terms of numbers produced.&nbsp;They were originally conceived as a processor for desktop personal computers by&nbsp;Acorn Computers, a market now dominated by the&nbsp;x86&nbsp;family used by&nbsp;IBM PC&nbsp;compatible and&nbsp;AppleMacintosh&nbsp;computers.<br /><br /><b><u>The ARM Cortex-M3</u></b><br /><br />The <b>ARM Cortex family</b> is a new generation of processors that has a standard CPU and system architecture. Unlike other ARM CPUs, the Cortex family is a complete processor core in itself.<br /><br />It comes in three series:<br /><b>A series</b>: For high end applications, using complex OS and user<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; applications. It supports ARM, Thumb and &nbsp;Thumb-2<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; instruction sets.<br /><b>R series</b>: They follow more of a RT system profile. They too<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; supports ARM, Thumb and Thumb-2 instruction sets.<br /><b>M series</b>: For microcontroller applications, and other<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cost-sensitive projects. It supports only Thumb-2<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; instruction set.<br /><br />There is a relative <b>performance level</b> for all these devices, ranging from 1-8. The highest level for M series is <b>3</b>.<br /><br />The <b>ARM Cortex-M3</b> provides the entire heart of a microcontroller, including timer, memory map, interrupt system, etc.<br />It has a Harvard Architecture, with about 4 GB total address space.<br /><br /><b><u>Operating Modes</u></b><br /><br />In <b>privileged mode</b>, the CPU has access to the full instruction set.<br />In <b>unprivileged mode</b>, xPSR related functions and access to most registers in the Cortex processor control space are disabled.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TO4rcFHrTMI/AAAAAAAAAWM/HAOUrHy5XSg/s1600/c3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="119" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TO4rcFHrTMI/AAAAAAAAAWM/HAOUrHy5XSg/s320/c3.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 1. The Cortex-M3 operating modes</td></tr></tbody></table>Both the <b>Thread and Handler modes</b> execute in privileged mode.<br /><br /><b><u>Programmer&#8217;s Model</u></b><br /><br />The Cortex CPU RISC processor has a load/store architecture. To perform data processing operations, operands must be <b>loaded</b> into a central register file, and the data operations are performed on these registers, and the result <b>stored</b> back to memory.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TO4lO8gbacI/AAAAAAAAAWE/Pewk73ric6A/s1600/c1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="87" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TO4lO8gbacI/AAAAAAAAAWE/Pewk73ric6A/s320/c1.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 2. The load/store architecture of Cortex-M3</td></tr></tbody></table><div><br /></div><div><b><u>Register File</u></b></div><div><br /></div><div>There are <b>sixteen 32-bit registers</b> in the processor register file, with an extra 32-bit&nbsp;<b>xPSR</b> (Program Status Register).</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TO4ra1zVtGI/AAAAAAAAAWI/APTQ0S1p17c/s1600/c2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TO4ra1zVtGI/AAAAAAAAAWI/APTQ0S1p17c/s320/c2.png" width="141" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-size: 13px;">Fig 3. The Cortex-M3 register file and xPSR</span></span></span></td></tr></tbody></table>The <b>Link Register (LR)</b> stores the return address of each procedure call.<br /><div>There are two stacks, <b>main stack</b> and <b>process stack</b>, to support the two operating modes. Register R15 is the <b>Program Counter (PC)</b>.</div><div><br /></div><div><b><u>Memory Map</u></b></div><div class="separator" style="clear: both; text-align: center;"></div><br />The memory map for the code area, SRAM area, and the peripheral devices are shown below.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TO4yNOaSN3I/AAAAAAAAAWU/uyYf_CbGkCM/s1600/c5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TO4yNOaSN3I/AAAAAAAAAWU/uyYf_CbGkCM/s1600/c5.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 4. A portion of the Cortex-M3 memory map</td></tr></tbody></table><br /><div><b><u>Features</u></b></div><div><br /></div><div>1. <b>Unaligned memory access</b> - The Cortex-M3 can make unaligned memory access, which ensures that SRAM is efficiently used.</div><div>2. <b>Bit Banding</b> - By this technique, direct bit manipulation can be performed on sections of peripheral and SRAM memory spaces, without the need for any special instructions (normal bit manipulations require READ, MODIFY, WRITE which is expensive in terms of number of cycles).</div><div>3. <b>Nested Vector Interrupt Controller (NVIC)</b> - It is a standard unit within the Cortex core, thus making the process of porting the code to different microcontrollers easier. It is designed to support nested interrupts and there are 16 levels of priority.&nbsp;</div><div>By the <b>interrupt preemption</b> technique, high priority interrupts can preempt low priority ones. By the <b>tail chaining</b> technique, successive interrupts can be added to the tail queue, thus reducing the latency in handling those interrupts.</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/04/analysing-jump-tables-in-msp430/">Analysing Jump Tables in MSP430 Assembly Code</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-11-04T16:31:00+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>4:31 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><div><b><u>Jump Table</u></b></div><div><br /></div><div>A jump table is an array of pointers to functions or an array of assembly code jump instructions.&nbsp;</div><div><br /></div><div>In assembling, jump tables are the most efficient method to handle switch statements with a large number of cases. The jump table is created only once and the required field in the table can be accessed simply by indexing.</div><div><br /></div><div>Especially in embedded systems, where there is a heavy constraint in available memory, jump tables can be efficient while consuming lesser memory too.</div><div><br /></div><div><b><u>Sample Program</u></b></div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNJCONGzuNI/AAAAAAAAAVA/uqo82UEsxJM/s1600/1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="285" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNJCONGzuNI/AAAAAAAAAVA/uqo82UEsxJM/s320/1.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 1. Sample Program</td></tr></tbody></table><div>The switch has only four cases, hence there is no need for a jump table. The cases are implemented simply as:</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TNJKAj7Wa3I/AAAAAAAAAVE/FuavTnI3YJ4/s1600/2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TNJKAj7Wa3I/AAAAAAAAAVE/FuavTnI3YJ4/s320/2.png" width="254" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 2. The switch implementation without jump table</td></tr></tbody></table><div>The behavior is almost as expected.</div><div>Now, I need a switch with enough cases, to get the attention of the gcc compiler heuristics.</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNJLnwtwmEI/AAAAAAAAAVI/l8PmcyJu8nE/s1600/3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNJLnwtwmEI/AAAAAAAAAVI/l8PmcyJu8nE/s320/3.png" width="273" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 3. More cases for the switch</td></tr></tbody></table><div>I have to check the corresponding assembly code generated for the above program, to be sure.</div><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNJwzBLGzVI/AAAAAAAAAVY/ZBpv1WCRqww/s1600/4.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="250" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TNJwzBLGzVI/AAAAAAAAAVY/ZBpv1WCRqww/s320/4.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 4. Lookup table created - PartI</td></tr></tbody></table></div><div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNJwxOCFTRI/AAAAAAAAAVU/mhRDcq4gx7I/s1600/5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TNJwxOCFTRI/AAAAAAAAAVU/mhRDcq4gx7I/s320/5.png" width="311" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 5. Lookup table created - PartII</td></tr></tbody></table></div><div>&nbsp;It worked, the compiler decided that a jump table is really essential now.<br /><br />The &#8220;mov #1,@r4&#8221; line stores the value of variable &#8220;i&#8221;. There are 8 cases, numbered from 0 to 7. Hence first &#8220;i&#8221;, i.e, @r4 is compared with 8, for obvious reasons.<br /><br /><b><u>Analysing the &#8216;jump table&#8217;</u></b><br /><br />The <b>jump table has been created, starting from the address denoted by the label &#8220;.L11&#8221;</b>.<br /><br />The first entry in the table holds label &#8220;.L3&#8221; which is the starting address &nbsp;of the block of&nbsp;statements under &#8220;case 0:&#8221;.<br />The next entry is &#8220;.L4&#8221;, which is the starting address of the block of statements under &#8220;case 1:&#8221;.<br />And so on &#8230; Till &#8220;case 7:&#8221;.<br />There are <b>8 &#8220;.word&#8221;s in the jump table</b> too. Correct!<br /><br />The line N in the jump table holds the starting address of the block of statements under the corresponding &#8220;case N:&#8221;. In other words, each line is the offset to be added to &#8220;.L11&#8221;, to execute the required case statements.<br /><br /><b><u>Decoding &#8230;</u></b><br /><br />&#8220;r15&#8221; holds the value to be switched.<br /><br />&#8221;<b>rla r15</b>&#8221; rotates left arithmetically the value inside r15, once (multiplication by 2).<br />Remember that even addressing is required for MSP430 family. <br /><br />&#8220;<b>add #.L11,r15</b>&#8221; adds the present value of &#8220;r15&#8221; (similar to offset), with the address of the &nbsp;label &#8220;.L11&#8221; (similar to base address).<br />&#8220;r15&#8221; now contains the address of the line that lies at the given offset from &#8220;.L11&#8221;.<br /><br />After the &#8221;<b>mov @r15,r15</b>&#8221; line, &#8220;r15&#8221; now contains the starting address of a block of statements under the selected &#8220;case&#8221;.<br /><br />&#8221;<b>br r15</b>&#8221; simply branches to the address pointed to by r15.<br /><br />Clean.<br /><br /><b><u>Issues</u></b><br /><ul><li>How can you justify that <b>jump tables are friendly to embedded systems</b>?</li></ul>Its true that a jump table has a particular overhead for itself.<br /><br />Suppose there are a very large number of switch cases. Then, this &#8220;jump to index&#8221; overhead will be much lower than the cost to perform N case comparisons. That is why jump tables are usually preferred.<br /><ul><li><b>Jump tables work only when the case identifiers are consecutive</b>.</li></ul>For example, case 1, case 2, case 3, etc &#8230;<br /><br />In situations where the cases are random and spread over a large range, suitable searching methods are needed. Normally, binary search is used. The correct case can then be selected in 3 or 4 steps without performing N comparisons each time.</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/03/assembling-in-msp430g2231/">Assembling in MSP430G2231</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-11-03T10:58:00+05:30'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2010</span></span> <span class='time'>10:58 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><b><u>Sample Program</u></b><br /><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov #0x0260,r5</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov #0x0270,r6</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span><br />&nbsp;&nbsp; &nbsp;Loop:<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>cmp #0,@r5</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>jz End<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov @r5,@r6</b><br /><span class="Apple-tab-span" style="white-space: pre;"> </span>incd r5<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>incd r6<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>jmp Loop<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><br />&nbsp;&nbsp; &nbsp;End:<br /><span class="Apple-tab-span" style="white-space: pre;"> </span>mov #0x01,&amp;0x22<br /><span class="Apple-tab-span" style="white-space: pre;"> </span><b>mov #0x01,&amp;0x21</b><br /><br />This code demonstrates a simple implementation of &#8217;<b>strcpy</b>&#8217; in msp430 assembly code. The first string is present in the location 0x0260. It is to be copied to another memory location starting from 0x0270. The RAM area of MSP430G2231 lies in the range 0x0200 to 0x027F.<br /><br />Whats worth noticing is the ease with which some operations are defined which are otherwise very difficult in other assembly codes.<br /><br />The program exits gracefully by lighting the red led, after successfully copying the string.<br /><br /><b><u>Notations</u></b><br /><br /><b>#</b> - This symbol is used to indicate a pure number. The<br />&nbsp;&nbsp; &nbsp; &nbsp;number can be an integer, in binary or a<br />&nbsp;&nbsp; &nbsp; &nbsp;hexadecimal.<br />&nbsp;&nbsp; &nbsp; &nbsp;For example, &#8220;mov #0x0260,r5&#8221; will move the hex<br />&nbsp;&nbsp; &nbsp; &nbsp;number 0260 to register r5.<br /><br /><b>@</b> - It can happen that, the data stored in a register is<br />&nbsp;&nbsp; &nbsp; &nbsp;the address of another memory location. The actual<br />&nbsp;&nbsp; &nbsp; &nbsp;value inside this address can be accessed by using<br />&nbsp;&nbsp; &nbsp; &nbsp;the &#8216;@&#8217;&nbsp;symbol. When &#8216;@&#8217; is used, the value in a<br />&nbsp;&nbsp; &nbsp; &nbsp;register is interpreted to be the address of a memory<br />&nbsp;&nbsp; &nbsp; &nbsp;location, and the actual data present in this location<br />&nbsp;&nbsp; &nbsp; &nbsp;is fetched.<br />&nbsp;&nbsp; &nbsp; &nbsp;The line &#8220;cmp #0,@r5&#8221; compares the number 0 with<br />&nbsp;&nbsp; &nbsp; &nbsp;the data in the memory location pointed to by the<br />&nbsp;&nbsp; &nbsp; &nbsp;value of r5.<br /><br /><b>&amp;</b> - When the address of a location is to be used directly,<br />&nbsp;&nbsp; &nbsp; &nbsp;the &#8216;&amp;&#8217; symbol is used. If not, the address is<br />&nbsp;&nbsp; &nbsp; &nbsp;interpreted as just a number, thereby generating errors.<br /><br /><b><u>Notable Feature</u></b><br /><br /><b>@ and again @</b><br />&nbsp;&nbsp; &nbsp;The line &#8220;mov @r5,@r6&#8221; is simple, sleek, easy-to-understand, self explanatory and normally illegal in other assembly languages.<br /><br />&nbsp;&nbsp; &nbsp;Technically, the &#8216;@&#8217; operation is emulated for the destination part. The &#8220;mov @r5,@r6&#8221; line will be changed to &#8221;<b>mov @r5,0x0(r6)</b>&#8221; after running msp430-gcc.<br /><br /><b><u>Conclusion</u></b><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TND2mraxVGI/AAAAAAAAAU8/R9RssfKc9mc/s1600/IMG_7331.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TND2mraxVGI/AAAAAAAAAU8/R9RssfKc9mc/s320/IMG_7331.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The MSP-EXP430G2 Launchpad (TI) for the MSP430 family</td></tr></tbody></table>Altogether, there are only 27 instructions with about 7 addressing modes in the MSP430 family, which are easy to grasp and employ.<br />&nbsp;&nbsp; <br />Coding in MSP430 family is fun!</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/26/remote-debugging-msp-exp430g2-launchpad/">Remote Debugging the MSP-EXP430G2 LaunchPad From TI</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-26T17:55:00+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>5:55 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><b><u>Remote Debugging in GDB</u></b><br /><br /><div>There is an inbuilt ability for gdb to also debug programs that reside in remote machines using a gdb-specific protocol. The remote machine is connected to the host via a serial line, or through a port. This remote connection is called a gdb <b>proxy</b>.<br /><br />While inside gdb, give as:<br />&nbsp;&nbsp; &nbsp;<b>(gdb) target remote localhost:2000</b><br /><br />This would enable gdb to perform all debugging operations on a program connected to the localhost machine through the port 2000.<br /><br />There is a prerequisite that the machine that is to be present in the same port must have set permissions for an external debugger.<br /><br /><b><u>Sample Program</u></b></div><div><b><u><br /></u></b></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMbCTvv1f9I/AAAAAAAAAUs/kPrwRO6vT2M/s1600/led1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="161" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMbCTvv1f9I/AAAAAAAAAUs/kPrwRO6vT2M/s320/led1.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 1. Sample program - led1.c</td></tr></tbody></table><div>This sample program named &#8216;led1.c&#8217;, is only used to demonstrate remote debugging.</div><div><br /><b><u>The Preparation</u></b></div><div class="separator" style="clear: both; text-align: auto;"><br /></div><div>Connect the LaunchPad to the system. Now the sample program is cross-compiled, and downloaded into the LaunchPad.<br />For further details, refer:<br /><a href="http://harijohnkuriakose.blogspot.com/2010/10/switching-on-launchpad-leds.html">switching-on-launchpad-leds.html</a><br /><br />For necessary reasons, I am calling the current terminal, &#8221;<b>Terminal1</b>&#8221;.<br /><br />The &#8217;<b>mspdebug</b>&#8217; has a built-in command that enables it to run a GDB remote stub on a specified TCP/IP port. If no port is specified, 2000 is taken as default.<br /><br />Give as:<br />&nbsp;&nbsp; &nbsp;<b>(mspdebug) gdb</b><br /><br />A message will be displayed as:<br />&nbsp;&nbsp; &nbsp;<b>Bound to port 2000. Now waiting for connection&#8230;</b><br /><br />At this time, open another terminal. I&#8217;m calling it &#8221;<b>Terminal2</b>&#8221;.<br />In Terminal2, give as:<br />&nbsp;&nbsp; &nbsp;<b>msp430-gdb -q a.out</b><br /><br />Here, &#8216;a.out&#8217; is the LaunchPad-specific executable binary obtained by cross-compiling the above sample program.<br /><br />Now, connect to the remote machine already waiting in port 2000 as:<br />&nbsp;&nbsp; &nbsp;<b>(gdb) target remote localhost:2000</b><br /><br />An acknowledgement message will be displayed as:<br />&nbsp;&nbsp; &nbsp;<b>Remote debugging using localhost:2000</b><br />&nbsp;&nbsp; &nbsp;<b>0x0000fc00 in _reset_vector__ ()</b><br /><br />If you check back in Terminal1, messages similar to the following will have been displayed:<br />&nbsp;&nbsp; &nbsp;<b>Client connected from 127.0.0.1:47558</b><br />&nbsp;&nbsp; &nbsp;<b>Clearing all breakpoints&#8230;</b><br />&nbsp;&nbsp; &nbsp;<b>Reading 2 bytes from 0xfc00</b><br /><br />The current states of the two terminals is as shown:</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TMbEVjegF_I/AAAAAAAAAUw/b9gcPoUeKVo/s1600/t1nt2-1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="164" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TMbEVjegF_I/AAAAAAAAAUw/b9gcPoUeKVo/s320/t1nt2-1.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 2. Terminal1 (left side) &nbsp;and Terminal 2 (right side)</td></tr></tbody></table><div>On listing &#8216;led1.c&#8217; in Terminal2, the memory addresses from which the bytes are read will be displayed in Terminal1, simultaneously.</div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMbFfzZmXdI/AAAAAAAAAU0/T6gY7iyHHKw/s1600/t1nt2-2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="165" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMbFfzZmXdI/AAAAAAAAAU0/T6gY7iyHHKw/s320/t1nt2-2.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 3. Listing the sample program</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TMbGr9yUWNI/AAAAAAAAAU4/8RgWZTSv8qU/s1600/t1nt2-3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="166" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TMbGr9yUWNI/AAAAAAAAAU4/8RgWZTSv8qU/s320/t1nt2-3.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 4. Single stepping through runtime libraries</td></tr></tbody></table><div>On further single steps from this point, the runtime libraries through which the control passes until main( ) is reached, can be observed directly !!!<br />Notice that a considerable number of bytes have been read.<br /><br />Now, single step till the instruction &#8216;P1OUT = 0x01&#8217; is reached.&nbsp;</div><div><br /></div><div><b><u>The Action</u></b></div><div><br /></div><div>At this point, the next single step will cause it to execute, which will pass a high voltage (binary 1) to the red led on the LaunchPad, i.e., do it, and see the red LaunchPad led (P1.0) flash bright !!!</div><div><br />On next step, a binary 0 is passed to P1.0, causing it to be off.<br /><br />Single step again, and see the green LaunchPad led (P1.6) flash before your eyes !!!<br /><br />Turn it off too, and keep on single stepping, until you relish the wonderful thing thats happening infront of you &#8230; This is GDB at its best !!!</div><div>At all these points, the memory addresses from which reading takes place are displayed in Terminal1.</div><div><br /><b>N. B.</b>&nbsp;</div><div><ul><li>Properly exit from both mspdebug in Terminal1 and GDB in Terminal2, before disconnecting the LaunchPad from the system.</li><li>Exit from GDB in Terminal2 first, and then mspdebug in Terminal1.</li></ul><b><u></u></b><br /><b><u></u></b><br /><b><u><div><span class="Apple-style-span" style="-webkit-text-decorations-in-effect: none; font-weight: normal;"><b><u><br /></u></b></span></div><div><span class="Apple-style-span" style="-webkit-text-decorations-in-effect: none; font-weight: normal;"><b><u>Addendum</u></b></span></div></u></b><br />It was one of the cutest moments, to actually &#8216;see&#8217; GDB in work.&nbsp;</div><div>I am crazy on LaunchPad !!!&nbsp;</div></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/26/switching-on-launchpad-leds/">Switching on the LaunchPad LEDs &#8230;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-26T07:30:00+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>7:30 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><b><u>Installation</u></b></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">The basic amenities are:</div><ul><li><b>mspgcc</b></li><li><b>libusb-dev</b></li><li><b>libreadline-dev</b></li><li><b>mspdebug</b></li></ul><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">After these are installed,&nbsp;<b>msp-430-gcc</b>&nbsp;or&nbsp;<b>msp-430-gcc-4.4.3</b>&nbsp;can be used to cross-compile the C code.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">The &#8216;libusb-dev&#8217; library contains necessary libraries for sucessfully connecting the LaunchPad through the USB cable.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br />The &#8216;libreadline-dev&#8217; library is for enabling history for the commands typed inside the &#8216;mspdebug&#8217; environment.<br /><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Ensure that the LaunchPad has been detected by:</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">&nbsp;&nbsp; &nbsp;<b>dmesg | tail</b></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Your LaunchPad will be assigned to the device:&nbsp;<b>/dev/ttyACM0</b>.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">The mspdebug is used for interacting with, erasing or burning the flash memory of the MSP chip. It also allows to debug the downloaded program present inside the MSP chip flash memory, through the inbuilt JTAG or Spy-By-Wire support.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">The&nbsp;<b>eZ430-RF2500 too</b>l of the mspdebug supports the USB connection and also provides&nbsp;<b>Spy-By-Wire</b>&nbsp;debugging.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><b><u>Switch on your LEDs !!!</u></b>&nbsp;&nbsp;</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">A sample program led2.c, which lights up both the LEDs on th LaunchPad when the switch S2 on P1.3 is pressed.</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-bottom: 0.5em; margin-left: auto; margin-right: auto; padding-bottom: 6px; padding-left: 6px; padding-right: 6px; padding-top: 6px; text-align: center;"><tbody><tr><td style="text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><a href="http://2.bp.blogspot.com/_rkBB8V8TgZY/TMY0Pp8ry9I/AAAAAAAAAUo/OpOIQhY8NIM/s1600/prog.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="164" src="http://2.bp.blogspot.com/_rkBB8V8TgZY/TMY0Pp8ry9I/AAAAAAAAAUo/OpOIQhY8NIM/s320/prog.png" style="cursor: move;" width="320" /></a></div></td></tr><tr><td class="tr-caption" style="font-size: 13px; padding-top: 4px; text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Fig 1. The sample program</div></td></tr></tbody></table><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">First, cross-compile the code.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">&nbsp;&nbsp; &nbsp;<b>msp430-gcc-4.4.3 -g led2.c</b></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Now connect the LaunchPad. Then:</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">&nbsp;&nbsp; &nbsp;<b>sudo mspdebug rf2500</b></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-bottom: 0.5em; margin-left: auto; margin-right: auto; padding-bottom: 6px; padding-left: 6px; padding-right: 6px; padding-top: 6px; text-align: center;"><tbody><tr><td style="text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TMYwxhMF0VI/AAAAAAAAAUc/oLqtLpD-R9o/s1600/4.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="222" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TMYwxhMF0VI/AAAAAAAAAUc/oLqtLpD-R9o/s320/4.png" style="cursor: move;" width="320" /></a></div></td></tr><tr><td class="tr-caption" style="font-size: 13px; padding-top: 4px; text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Fig 2. Inside mspdebug</div></td></tr></tbody></table><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">To download the code, use:</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">&nbsp;&nbsp; &nbsp;<b>(mspdebug)&nbsp;prog a.out</b></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-bottom: 0.5em; margin-left: auto; margin-right: auto; padding-bottom: 6px; padding-left: 6px; padding-right: 6px; padding-top: 6px; text-align: center;"><tbody><tr><td style="text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMYx9kSw1CI/AAAAAAAAAUg/s4brsEHVQOc/s1600/5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="36" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMYx9kSw1CI/AAAAAAAAAUg/s4brsEHVQOc/s320/5.png" style="cursor: move;" width="320" /></a></div></td></tr><tr><td class="tr-caption" style="font-size: 13px; padding-top: 4px; text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Fig 3. Downloading the code</div></td></tr></tbody></table><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Now run it, as:</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">&nbsp;&nbsp; &nbsp;<b>(mspdebug) run</b></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-bottom: 0.5em; margin-left: auto; margin-right: auto; padding-bottom: 6px; padding-left: 6px; padding-right: 6px; padding-top: 6px; text-align: center;"><tbody><tr><td style="text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYyvEiV0EI/AAAAAAAAAUk/uR0bK9kuvRM/s1600/6.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="29" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYyvEiV0EI/AAAAAAAAAUk/uR0bK9kuvRM/s320/6.png" style="cursor: move;" width="320" /></a></div></td></tr><tr><td class="tr-caption" style="font-size: 13px; padding-top: 4px; text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Fig 4. Running the code</div><div><br /></div></td></tr></tbody></table></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/26/addressing-modes-in-msp430-family/">The Addressing Modes in the MSP430 Family</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-26T07:29:00+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>7:29 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><b><u></u></b><br /><b><u><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_rkBB8V8TgZY/TMYq_-qXLsI/AAAAAAAAAUY/7NpULFeHm08/s1600/IMG_7338.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="http://4.bp.blogspot.com/_rkBB8V8TgZY/TMYq_-qXLsI/AAAAAAAAAUY/7NpULFeHm08/s320/IMG_7338.JPG" width="320" /></a></div><div><b><u><br /></u></b></div><div><b><u><br /></u></b></div><div><span class="Apple-style-span" style="-webkit-text-decorations-in-effect: none; font-weight: normal;"><b><u>Register Mode</u></b></span></div></u></b><br /><br /><b>mov.w</b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>R4,R5</b><span class="Apple-tab-span" style="white-space: pre;"> </span>; move (copy) word from R4 to R6<br /><br />It is the fastest, with&nbsp;only 1 machine cycle needed.<br />Any of the 16 registers can be used as source or destination.<br /><br />Special cases:<br /><ul><li><span class="Apple-tab-span" style="white-space: pre;"> </span>PC - it will be autoincremented before it is used as source</li><li><span class="Apple-tab-span" style="white-space: pre;"> </span>Both PC and SP must be even, because they are always used as words. so &nbsp;LSB discarded if they are used as destination</li><li><span class="Apple-tab-span" style="white-space: pre;"> </span>CG2 - it reads 0 as source</li></ul>for byte operations:<br /><ul><li><span class="Apple-tab-span" style="white-space: pre;"> </span>operand is taken from lower byte only</li><li><span class="Apple-tab-span" style="white-space: pre;"> </span>writing is performed to lower byte only, upper byte is cleared</li></ul>To use the upper byte in a regiser as source, &#8217;<b>swpb</b>&#8217; may be used.<br /><br /><b><u>Indexed Mode</u></b><u>&nbsp;</u><br /><br />Similar to arrays.<br /><br /><b>mov.b </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>3(R5),R6</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>; load byte from address 3+(R5) into R6<br /><br />Here, base address is 3.<br />Indexing can be used for the source or destination part.<br /><br /><b><u>Symbolic Mode</u></b><u> </u><b><u>(PC Relative)</u></b><br /><br />When PC is used as the base address in the indexed mode, its called symbolic mode by TI. The offset to be added to the PC is given as the constant.<br /><br />mov.w <span class="Apple-tab-span" style="white-space: pre;"> </span>Loop,R6 <span class="Apple-tab-span" style="white-space: pre;"> </span>; load word Loop into R6<br /><br />Assembler replaces this as:<br /><br /><b>mov.w </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b> X(PC),R6 </b><span class="Apple-tab-span" style="white-space: pre;"> </span>;<br /><br />where X = Loop - PC, is the offset in this case. It is caluclated by the assembler, which also performs autoincrementing of PC.<br /><br />In MSP430, absolute addressing can reach all the memory map. The symbolic mode is mainly meant for MSP430X, etc.<br /><br /><b><u>Absolute Mode</u></b><br /><br />This is a special case where the constant in the indexed mode is the absolute address of the data. Since the constant is already the final address, the base must be taken as an address of 0. Usually the SR is selected for this purpose. It behaves as 0 when used as the base, i.e, this is one instance when the SR behaves as a constant generator (CG1).<br /><br />Absolute addressing is shown by the prefix &amp;.<br /><br /><b>mov.b </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>P1IN,R6</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>; load byte P1IN into R6<br /><br />It is replaced by the assembler as:<br /><br /><b>mov.b </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>P1IN(SR),R6</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>;<br /><br />P1IN is the offset, and SR behaves as 0.<br /><br /><b><u>SP-Relative</u></b><br /><br />This is not a separate mode in itself. At any time, any value pushed into the stack previously can be accessed, by offseting a suitable amount from the SP. For example:<br /><br /><b>mov.w </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>2(SP),R6</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>;<br /><br /><b><u>Indirect Register Mode</u></b><br /><br />This is available only for the source. It is indicated by the sign <b>@</b>. It means that the contents of a register is used as the address of the operand, i.e, the register contains a &#8220;pointer&#8221; to the actual operand.<br /><br /><b>mov.w </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>@R5,R6</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>; load word from address pointed to by R5<br /><br />This is similar to indexed addressing with base address 0. It saves a word of program memory, hence makes it faster.<br /><br />This mode cannot be used for destination. Using indexed addressing instead:<br /><br /><b>mov.w </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>R6,0(R5)</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>; store word from R6 into address 0+(R5)<br /><br />There is a penalty that a word 0 must be stored in the program memory, and fetched. The constant generator cannot be used.<br /><br /><b><u>Indirect Autoincrement Register Mode</u></b><br /><br />This is also available only for the source. It is indicated by a <b>@ in the front, and a + as suffix</b>. Here, the register is used as a pointer as in the indirect register mode. After this, the value in the register is autoincremented by 1 if a byte has been fetched, or by 2 if a word has been fetched.<br /><br /><b>mov.w @R5+, R6</b><br /><br />Since this mode cannot be used for destination, the indexed addressing mode must be used and then explicitly incrementing the value of the register appropriately. Obviously, two instructions would be required.<br /><br /><b>N.B.</b><br /><ul><li>MSP430 only has postincrement addressing.</li><li>In all the addressing modes, all operations on the first address are fully&nbsp;completed before the second address is evaluated.</li></ul><br /><b><u>Immediate Mode</u></b><br /><br />It is a special case of autoincrement addressing that uses program counter PC. For example:<br /><br /><b>mov.w </b><span class="Apple-tab-span" style="white-space: pre;"><b> </b></span><b>@PC+,R6</b> <span class="Apple-tab-span" style="white-space: pre;"> </span>;<br /><br />Here, after the instruction pointed to by PC has been fetched, PC is autoincremented, i.e., PC now points to the next instruction. This particular instruction will be the one copied into R6.</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/26/msp430-central-processing-unit/">The MSP430 Central Processing Unit</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-26T07:27:00+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>7:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content">MSP430 has 4 special purpose and 12 general purpose registers.<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYn_0w0cKI/AAAAAAAAAUU/Uj9b6z4mYA0/s1600/IMG_7330.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYn_0w0cKI/AAAAAAAAAUU/Uj9b6z4mYA0/s320/IMG_7330.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 1. The MSP430 LaunchPad from TI</td></tr></tbody></table><br />The registers in MSP430 are:<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYlIda6pEI/AAAAAAAAAUI/YgZ6C53TSMM/s1600/1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="158" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYlIda6pEI/AAAAAAAAAUI/YgZ6C53TSMM/s320/1.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 2. The registers in MSP430</td></tr></tbody></table><br /><b>Program Counter</b> <b>(PC)</b><br /><br />The program counter stores the address of the instruction which is to be executed next.<br /><br />For the execution of each instruction, first the address stored in the PC is placed in the address bus. Then, the instruction stored in this address is fetched. Meanwhile, the PC is automatically incremented by 2, i.e, PC now contains the address of the next instruction. The current instruction is now executed, and the next instruction fetched simultaneously.<br /><br />This is the normal procedure, unless a jump instruction is encountered. In such cases, the PC is incremented by an offset contained in the opcode of the jump instruction. For interrupts and subroutines, the return address needs to be stored in the stack pointer before jumping.<br /><br />An instruction comprises of 1-3 words, which are aligned to even addresses. So the LSB is hardwired to zero.<br /><br /><b>Stack Pointer (SP)</b><br /><br />In MSP 430, the top of the RAM (12b bytes) is initially allotted to the stack pointer. Further writings into the stack are performed at lower addresses (<b>goes downwards</b>).<br />Also, the lsb of a stack address is always hardwired to zero, i.e., <b>stack addresses always point to words</b>. If only a byte is written into the stack, then one byte will be wasted to preserve this alignment.<br /><br />In assembly language, after a reset, the stack pointer must be explicitly initialized to 0x280.<br /><b><br /></b><br /><b>Predecrement addressing</b> (Pushing) - To insert a new value into the stack, first the stack pointer is decremented by 2, then writing is performed.<br /><b>Postincrement addressing</b> (Popping) - To delete the current value in the stack pointer, first the value is deleted, then the stack pointer is incremented by 2.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYmL6nLGvI/AAAAAAAAAUM/G37Neu_C5Bo/s1600/2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMYmL6nLGvI/AAAAAAAAAUM/G37Neu_C5Bo/s320/2.png" width="293" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 3. Basic stack operations in MSP430</td></tr></tbody></table><br /><b>Status Register (SR)</b><br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMYmmetuicI/AAAAAAAAAUQ/FzyQHDD6q60/s1600/3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="41" src="http://1.bp.blogspot.com/_rkBB8V8TgZY/TMYmmetuicI/AAAAAAAAAUQ/FzyQHDD6q60/s320/3.png" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 4. The Status Register</td></tr></tbody></table><b>N</b> - Negative Flag<br /><b>Z</b> - Zero Flag<br /><b>C</b> - Carry flag<br /><b>V</b> - Signed Overflow Flag<br /><b>GIE</b> - General Interupt Enable<br /><b>SCG1</b>, <b>SCG0</b>, <b>OSC OFF</b>, <b>CPU OFF</b> - Control of Low Power Modes<br /><b><span class="Apple-style-span" style="font-weight: normal;"><br /></span></b><br /><b><span class="Apple-style-span" style="font-weight: normal;">The SR also acts as constant generator CG0.</span></b><br /><b><br /></b><br /><b>Constant Generator (CG0, CG1)</b><br />Both R2 and R3 are used to generate 6 most frequently used constants. This saves fetching time. The constant generated depends on the addressing mode used.<br /><br /><b>General Purpose Registers</b><br />There are 12 of them, <b>R4 - R15</b>. They can be used to store address or data, since both are 16 bit in the MSP430 family. This leads to considerable simplification in the operations.</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/26/msp-exp430g2-development-board/">The MSP-EXP430G2 Development Board</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-10-26T07:27:00+05:30'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>7:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content">First of all, thanks to <a href="http://pramode.net/">Pramode Sir</a> for allowing me to lay my hands on this beauty !!!<br /><br /><b>The MSP-EXP430G2 Texas Instruments (TI) Launchpad is a $4.30 (only!) Development Board for the MSP430 family from Texas Instruments (TI).</b><br /><br />The 14 pin DIP chip shown in the pictures is a <b>MSP430G2231</b>.<br /><div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMXa5vGGaHI/AAAAAAAAAT8/6dyOMYLfCEI/s1600/IMG_7321.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMXa5vGGaHI/AAAAAAAAAT8/6dyOMYLfCEI/s320/IMG_7321.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 1. Top Side View.</td></tr></tbody></table><b><span class="Apple-style-span" style="font-weight: normal;"><br /></span></b><br /><b>Overview</b><br /><br />The original MSP430 was introduced in the late 1990&#8217;s. In its currrent form, it is a decent midrocontroller with a 16-bit processor having von-Neumann architecture. It is primarily designed for low power applications.<br /><br />MSP430 is a 16-bit microcontroller, with obviously, a 16 bit data bus and a 16 bit address bus. Its address space is therefore, 2^16 = 64KB of memory. The registers in its CPU are also 16 bit. Hence, machine language instructions can be used with ease whether it be local variables, address or data. Note that MSP430X has extended registers, and a wider address bus and can handle upto 1 MB of memory.<br /><br />It can be said to be a RISC, but unlike a pure &#8220;RISC&#8221;, it can perform arithmetic operations directly on values in memory. Overall, the MSP430 is one of the simplest microcontrollers from Texas Instruments (TI).<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><img border="0" height="240" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMXboJiYyJI/AAAAAAAAAUA/Dpyq_RIGArI/s320/IMG_7326.JPG" style="margin-left: auto; margin-right: auto;" width="320" /></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 2. Side View.</td></tr></tbody></table></div><div><div><br /></div><div><b>Its all in the name &#8230;</b></div><div><b><br /></b></div><div>The name MSP stands for <b>Mixed Signal Processor (MSP)</b>. It indicates that the device can take analog signals as input, and there are also analog to digital converters with a resolution of upto 16 bits.</div><div><br /></div><div>The letter after MSP430 shows the type of memory.</div><div>&nbsp;&nbsp; &nbsp;<b>F</b> - Flash memory</div><div>&nbsp;&nbsp; &nbsp;<b>C</b> - ROM</div><div><br /></div><div>For <b>ASSP</b>s, there is a second letter, to indicate the type of measurement.</div><div>&nbsp;&nbsp; &nbsp;<b>E</b> - electricity</div><div>&nbsp;&nbsp; &nbsp;<b>W</b> - water</div><div>&nbsp;&nbsp; &nbsp;<b>G</b> - signals with a gain stage and op-amps in-between</div><div><br /></div><div>Next digit shows family, and final 2 or 3 digits identify the specific device.</div></div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMXd0x2xILI/AAAAAAAAAUE/mUkw5ZYOdL4/s1600/IMG_7343.JPG" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://3.bp.blogspot.com/_rkBB8V8TgZY/TMXd0x2xILI/AAAAAAAAAUE/mUkw5ZYOdL4/s320/IMG_7343.JPG" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Fig 3. Top Front View.</td></tr></tbody></table><div><div class="separator" style="clear: both; text-align: center;"><s style="margin-left: 1em; margin-right: 1em;"></s></div></div><div><div><b><br /></b></div><div><b>Features</b></div><div><ul><li><span class="Apple-tab-span" style="white-space: pre;"> </span>A very small and efficient CPU with 16 bit registers.</li><li><span class="Apple-tab-span" style="white-space: pre;"> </span>Specially designed low power modes.</li><li><span class="Apple-tab-span" style="white-space: pre;">  </span>No special instructions are needed to put the device in a low-power mode. The mode is controlled by the respective bits in the status register. If an interrupt occurs, MSP430 awakens and returns back to the low power mode smoothly, after the particular interrupt has been serviced.&nbsp;</li><li><span class="Apple-tab-span" style="white-space: pre;">  </span>There is an internal <b>Digitally Controlled Oscillator</b> (<b>DCO</b>) which clocks the CPU. It is capable of restarting in 1 us, thus making the device to wake up from standby or return to low power mode very quickly.</li><li><span class="Apple-tab-span" style="white-space: pre;">  </span>There are various low power modes, differing in how much area of the device is active, and how long it takes to restart.</li><li><span class="Apple-tab-span" style="white-space: pre;">  </span>It is compatible with a wide range of peripherals used for various purpos</li><li><span class="Apple-tab-span" style="white-space: pre;">  </span>It can drive Liquid Crystal Displays (LCD) directly.</li><li><span class="Apple-tab-span" style="white-space: pre;">  </span>Some are classified as <b>Application Specific Standard Products</b> (<b>ASSP</b>), and used for specialized purposes.&nbsp;</li></ul></div></div></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2010/11/25/translating-c-constructs-to-msp430/">Translating C Constructs to MSP430 Assembly Code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/25/arsenal-of-embedded-system-programmer/">The Arsenal of an Embedded System Programmer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/25/arm-cortex-m3/">The ARM Cortex-M3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/04/analysing-jump-tables-in-msp430/">Analysing Jump Tables in MSP430 Assembly Code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/03/assembling-in-msp430g2231/">Assembling in MSP430G2231</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
